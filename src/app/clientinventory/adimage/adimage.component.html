<div>
  <span> <img src='../assets/Photos/tealogo.jpg' width=20% height=20% /></span>
  <p></p>
</div>

<h1> 藏家頁面廣告管理系統</h1>


<div class="d-flex">
  <div>
          <button type="button" class="btn btn-success" onclick="location.href='#/teaportal';">返回管理頁面</button>
  </div>
  <div class="ml-auto">
           <button type="button" class="btn btn-primary" (click)="SaveEntity()">儲存廣告圖片連結</button>
  </div>
</div>
<p></p>


  <div class="center">
    <ngx-file-drop dropZoneLabel="Drop files here" (onFileDrop)="dropped($event)"
    (onFileOver)="fileOver($event)" (onFileLeave)="fileLeave($event)">
        <ng-template ngx-file-drop-content-tmp let-openFileSelector="openFileSelector">
          拖曳或是選擇要上傳的圖片(必須小於4mb)
          <button type="button" (click)="openFileSelector()">Browse Files</button>
        </ng-template>
    </ngx-file-drop>
</div>

<table class="table table-borderless table-striped">
   <tbody>

  <tr>
      <td colspan="2">


              <div>
                <bs-sortable
                  [(ngModel)]="list"
                  [itemTemplate]="itemTemplateImage"
                  itemClass="sortable-item"
                  itemActiveClass="sortable-item-active"
                  placeholderItem="Drag here"
                  placeholderClass="placeholderStyle"
                  wrapperClass="sortable-wrapper"
                ></bs-sortable>
              </div>
      </td>
  </tr>
   </tbody>
</table>

<hr>

<h1> 廣告連結管理</h1>



<table class="table table-borderless table-striped">
  <tbody>
 <tr>
   <td>
    <button type="button" class="btn btn-primary btn-xs" (click) ="AddNewTextLink()">新增廣告連結</button>
   </td>
   <td>
    <button type="button" class="btn btn-success btn-xs" (click) ="SaveTextLinks()">儲存廣告連結</button>
   </td>
 </tr>
 <tr>
     <td colspan="2">



              <div>
                <bs-sortable
                  [(ngModel)]="textLInks"
                  [itemTemplate]="itemTemplate"
                  itemClass="sortable-item"
                  itemActiveClass="sortable-item-active"
                  placeholderItem="Drag here"
                  placeholderClass="placeholderStyle"
                  wrapperClass="sortable-wrapper"
                ></bs-sortable>
              </div>


     </td>


 </tr>

  </tbody>
</table>



<ng-template #itemTemplateImage let-item="item" let-index="index">

  <div class="row"  style="border-style:solid; border-width: thin; border-color: lightblue;">

    <img [src]="item.value.Image_Url"   class="img-thumbnail" > <p></p>
    名稱:<input [(ngModel)]="item.value.Name" #ctrl="ngModel"  name="imagename" class="form-control"/> <p></p>
    備註: <input [(ngModel)]="item.value.Comment" #ctrl="ngModel"  name="imageComment" type="text"  class="form-control"/><p></p>
    圖片連結: <input [(ngModel)]="item.value.Target_Url" #ctrl="ngModel"  name="targeturl" type="text"  class="form-control"/><p></p>
    <button type="button" class="btn btn-danger btn-xs" (click) ="RemoveImage(index)">刪除圖片</button>

  </div>

  <p></p>

</ng-template>




<ng-template #itemTemplate let-item="item" let-index="index">

  <div style="border-style:solid; border-width: thin;">
    廣告連結名稱:<input [(ngModel)]="item.value.Name" #ctrl="ngModel"  name="imagename" class="form-control"/> <p></p>
    連結(url): <input [(ngModel)]="item.value.Target_Url" #ctrl="ngModel"  name="targeturl" type="text"  class="form-control"/><p></p>
    <button type="button" class="btn btn-danger btn-xs" (click) ="RemoveTextLink(index)">刪除廣告連結</button>

  </div>

  <p></p>

</ng-template>




<ngx-spinner
  bdColor="rgba(51,51,51,0.8)"
  size="medium"
  color="#fff"
  type="ball-scale-multiple"
>
  <p style="font-size: 20px; color: white">處理中...</p>
</ngx-spinner>
